<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="ØªØ³ÙˆÙ‚ Ø£Ø­Ø¯Ø« Ø§Ù„Ù‡ÙˆØ§ØªÙ Ø§Ù„Ø°ÙƒÙŠØ© Ù…Ù† Ø£ÙØ¶Ù„ Ø§Ù„Ù…Ø§Ø±ÙƒØ§Øª Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠØ©">
    <title>ØªØ³ÙˆÙ‘Ù‚ | Ù…ÙˆØ¨Ø§ÙŠÙ„ Ø³ØªÙˆØ±</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Tajawal:wght@300;400;500;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="css/variables.css">
    <link rel="stylesheet" href="css/base.css">
    <link rel="stylesheet" href="css/layout.css">
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="css/header.css">
    <link rel="stylesheet" href="css/pages.css">
    <link rel="stylesheet" href="css/footer.css">
    <style>
        /* Shop Page Specific Styles */
        .shop-page {
            padding: var(--space-6) 0;
            min-height: 100vh;
            background: var(--color-bg-secondary);
        }

        .shop-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 var(--space-4);
        }

        /* Page Title */
        .page-hero {
            background: linear-gradient(135deg, var(--color-primary), #FF6B00);
            padding: var(--space-8) var(--space-4);
            margin-bottom: var(--space-6);
            border-radius: var(--radius-2xl);
            color: white;
            text-align: center;
        }

        .page-hero h1 {
            font-size: var(--text-2xl);
            font-weight: var(--font-bold);
            margin-bottom: var(--space-2);
        }

        .page-hero p {
            opacity: 0.9;
            font-size: var(--text-sm);
        }

        /* Shop Header */
        .shop-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: var(--space-3);
            padding: var(--space-4);
            background: var(--color-bg-primary);
            border-radius: var(--radius-xl);
            box-shadow: var(--shadow-sm);
            margin-bottom: var(--space-6);
        }

        .shop-results {
            font-size: var(--text-sm);
            color: var(--color-text-secondary);
            font-weight: var(--font-medium);
        }

        .shop-actions {
            display: flex;
            align-items: center;
            gap: var(--space-3);
        }

        /* Filter Button */
        .filter-btn {
            display: inline-flex;
            align-items: center;
            gap: var(--space-2);
            padding: var(--space-3) var(--space-4);
            background: var(--color-bg-secondary);
            border: 1px solid var(--color-border-light);
            border-radius: var(--radius-lg);
            font-size: var(--text-sm);
            font-weight: var(--font-medium);
            color: var(--color-text-primary);
            cursor: pointer;
            transition: all var(--transition-fast);
        }

        .filter-btn:hover {
            background: var(--color-bg-tertiary);
            border-color: var(--color-primary);
        }

        .filter-btn svg {
            width: 18px;
            height: 18px;
        }

        @media (min-width: 1024px) {
            .filter-btn {
                display: none;
            }
        }

        /* Sort Select */
        .sort-select {
            padding: var(--space-3) var(--space-4);
            padding-left: var(--space-10);
            border: 1px solid var(--color-border-light);
            border-radius: var(--radius-lg);
            background-color: var(--color-bg-primary);
            font-size: var(--text-sm);
            font-weight: var(--font-medium);
            min-width: 160px;
            cursor: pointer;
        }

        /* Shop Layout */
        .shop-layout {
            display: grid;
            grid-template-columns: 1fr;
            gap: var(--space-6);
        }

        @media (min-width: 1024px) {
            .shop-layout {
                grid-template-columns: 280px 1fr;
            }
        }

        /* Sidebar */
        .shop-sidebar {
            display: none;
        }

        @media (min-width: 1024px) {
            .shop-sidebar {
                display: block;
                background: var(--color-bg-primary);
                padding: var(--space-5);
                border-radius: var(--radius-xl);
                box-shadow: var(--shadow-sm);
                height: fit-content;
                position: sticky;
                top: 100px;
            }
        }

        .sidebar-section {
            margin-bottom: var(--space-6);
            padding-bottom: var(--space-6);
            border-bottom: 1px solid var(--color-border-light);
        }

        .sidebar-section:last-child {
            margin-bottom: 0;
            padding-bottom: 0;
            border-bottom: none;
        }

        .sidebar-title {
            font-size: var(--text-sm);
            font-weight: var(--font-bold);
            color: var(--color-text-primary);
            margin-bottom: var(--space-4);
            display: flex;
            align-items: center;
            gap: var(--space-2);
        }

        .sidebar-title svg {
            width: 18px;
            height: 18px;
            color: var(--color-primary);
        }

        /* Brand Checkboxes */
        .brand-list {
            display: flex;
            flex-direction: column;
            gap: var(--space-3);
        }

        .brand-item {
            display: flex;
            align-items: center;
            gap: var(--space-3);
            cursor: pointer;
            padding: var(--space-2);
            border-radius: var(--radius-md);
            transition: background var(--transition-fast);
        }

        .brand-item:hover {
            background: var(--color-bg-secondary);
        }

        .brand-item input {
            width: 18px;
            height: 18px;
            accent-color: var(--color-primary);
            cursor: pointer;
        }

        .brand-item span {
            font-size: var(--text-sm);
            color: var(--color-text-secondary);
        }

        /* Price Range */
        .price-inputs {
            display: flex;
            gap: var(--space-3);
        }

        .price-inputs input {
            flex: 1;
            padding: var(--space-3);
            border: 1px solid var(--color-border-light);
            border-radius: var(--radius-lg);
            font-size: var(--text-sm);
            text-align: center;
            background: var(--color-bg-secondary);
        }

        .price-inputs input:focus {
            outline: none;
            border-color: var(--color-primary);
            background: var(--color-bg-primary);
        }

        /* Stock Toggle */
        .stock-toggle {
            display: flex;
            align-items: center;
            gap: var(--space-3);
            padding: var(--space-3);
            background: var(--color-bg-secondary);
            border-radius: var(--radius-lg);
        }

        .stock-toggle input {
            width: 18px;
            height: 18px;
            accent-color: var(--color-primary);
        }

        .stock-toggle span {
            font-size: var(--text-sm);
            color: var(--color-text-secondary);
        }

        /* Products Grid */
        .products-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: var(--space-4);
        }

        @media (min-width: 640px) {
            .products-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: var(--space-5);
            }
        }

        @media (min-width: 1024px) {
            .products-grid {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        @media (min-width: 1280px) {
            .products-grid {
                grid-template-columns: repeat(4, 1fr);
            }
        }

        /* Product Card Enhanced */
        .product-card {
            display: flex;
            flex-direction: column;
            background: var(--color-bg-primary);
            border-radius: var(--radius-xl);
            overflow: hidden;
            box-shadow: var(--shadow-sm);
            transition: all var(--transition-base);
            text-decoration: none;
            border: 1px solid var(--color-border-light);
        }

        .product-card:hover {
            transform: translateY(-6px);
            box-shadow: var(--shadow-xl);
            border-color: var(--color-primary-light);
        }

        .product-card-image {
            position: relative;
            aspect-ratio: 1;
            background: linear-gradient(180deg, #f8f9fa, #ffffff);
            display: flex;
            align-items: center;
            justify-content: center;
            padding: var(--space-6);
            overflow: hidden;
        }

        .product-card-image img {
            max-height: 100%;
            max-width: 100%;
            object-fit: contain;
            transition: transform var(--transition-slow);
        }

        .product-card:hover .product-card-image img {
            transform: scale(1.08);
        }

        .product-card-badge {
            position: absolute;
            top: var(--space-3);
            right: var(--space-3);
            background: linear-gradient(135deg, var(--color-error), #dc2626);
            color: white;
            font-size: 11px;
            font-weight: var(--font-bold);
            padding: var(--space-1) var(--space-3);
            border-radius: var(--radius-full);
            box-shadow: var(--shadow-md);
        }

        .product-card-badge.featured {
            background: linear-gradient(135deg, var(--color-primary), #FF6B00);
        }

        .product-card-body {
            padding: var(--space-4);
            display: flex;
            flex-direction: column;
            gap: var(--space-2);
            flex: 1;
        }

        .product-card-brand {
            font-size: 11px;
            color: var(--color-text-muted);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            font-weight: var(--font-semibold);
        }

        .product-card-title {
            font-size: var(--text-sm);
            font-weight: var(--font-bold);
            color: var(--color-text-primary);
            line-height: 1.4;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
            min-height: 40px;
        }

        .product-card-specs {
            font-size: 12px;
            color: var(--color-text-muted);
            display: flex;
            gap: var(--space-2);
            flex-wrap: wrap;
        }

        .product-card-specs span {
            background: var(--color-bg-secondary);
            padding: 2px 8px;
            border-radius: var(--radius-sm);
        }

        .product-card-footer {
            margin-top: auto;
            padding-top: var(--space-3);
            border-top: 1px solid var(--color-border-light);
        }

        .product-card-price {
            display: flex;
            align-items: baseline;
            gap: var(--space-2);
            flex-wrap: wrap;
        }

        .product-card-price .current {
            font-size: var(--text-lg);
            font-weight: var(--font-bold);
            color: var(--color-primary);
        }

        .product-card-price .old {
            font-size: var(--text-xs);
            color: var(--color-text-muted);
            text-decoration: line-through;
        }

        .product-card-stock {
            font-size: 11px;
            margin-top: var(--space-2);
        }

        .product-card-stock.in-stock {
            color: var(--color-success);
        }

        .product-card-stock.out-of-stock {
            color: var(--color-error);
        }

        /* Empty State */
        .empty-state {
            grid-column: 1 / -1;
            text-align: center;
            padding: var(--space-12);
            color: var(--color-text-muted);
        }

        .empty-state svg {
            width: 80px;
            height: 80px;
            margin-bottom: var(--space-4);
            opacity: 0.3;
        }

        .empty-state p {
            font-size: var(--text-lg);
            margin-bottom: var(--space-4);
        }

        /* Mobile Filter Sheet */
        .filter-sheet-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.5);
            z-index: 999;
            opacity: 0;
            visibility: hidden;
            transition: all var(--transition-base);
        }

        .filter-sheet-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .filter-sheet {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            max-height: 85vh;
            background: var(--color-bg-primary);
            border-radius: var(--radius-2xl) var(--radius-2xl) 0 0;
            z-index: 1000;
            transform: translateY(100%);
            transition: transform var(--transition-slow);
            overflow: hidden;
        }

        .filter-sheet.active {
            transform: translateY(0);
        }

        .filter-sheet-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: var(--space-4) var(--space-5);
            border-bottom: 1px solid var(--color-border-light);
        }

        .filter-sheet-title {
            font-size: var(--text-lg);
            font-weight: var(--font-bold);
        }

        .filter-sheet-close {
            background: none;
            border: none;
            padding: var(--space-2);
            cursor: pointer;
            color: var(--color-text-muted);
        }

        .filter-sheet-content {
            padding: var(--space-5);
            max-height: calc(85vh - 140px);
            overflow-y: auto;
        }

        .filter-group {
            margin-bottom: var(--space-6);
        }

        .filter-group-title {
            font-size: var(--text-sm);
            font-weight: var(--font-bold);
            margin-bottom: var(--space-3);
            color: var(--color-text-primary);
        }

        .filter-pills {
            display: flex;
            flex-wrap: wrap;
            gap: var(--space-2);
        }

        .filter-pill {
            padding: var(--space-2) var(--space-4);
            background: var(--color-bg-secondary);
            border: 1px solid var(--color-border-light);
            border-radius: var(--radius-full);
            font-size: var(--text-sm);
            cursor: pointer;
            transition: all var(--transition-fast);
        }

        .filter-pill:hover,
        .filter-pill.active {
            background: var(--color-primary);
            color: white;
            border-color: var(--color-primary);
        }

        .filter-sheet-footer {
            display: flex;
            gap: var(--space-3);
            padding: var(--space-4) var(--space-5);
            border-top: 1px solid var(--color-border-light);
            background: var(--color-bg-primary);
        }

        .filter-sheet-footer .btn {
            flex: 1;
        }
    </style>
</head>

<body>
    <!-- Header -->
    <header class="header">
        <div class="header-inner">
            <button class="menu-toggle" aria-label="Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M3 12h18M3 6h18M3 18h18" />
                </svg>
            </button>
            <a href="index.html" class="header-logo">
                <svg class="header-logo-img" width="32" height="32" viewBox="0 0 32 32" fill="var(--color-primary)">
                    <rect x="8" y="2" width="16" height="28" rx="3" stroke="currentColor" stroke-width="2"
                        fill="none" />
                    <circle cx="16" cy="26" r="1.5" fill="currentColor" />
                </svg>
                <span class="header-logo-text">Ù…ÙˆØ¨Ø§ÙŠÙ„ Ø³ØªÙˆØ±</span>
            </a>
            <div class="header-actions">
                <button class="header-action-btn header-search-btn" aria-label="Ø¨Ø­Ø«">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="11" cy="11" r="8" />
                        <path d="M21 21l-4.35-4.35" />
                    </svg>
                </button>
                <a href="cart.html" class="header-action-btn header-cart-btn" aria-label="Ø§Ù„Ø³Ù„Ø©">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M6 6h15l-1.5 9h-12z" />
                        <circle cx="9" cy="20" r="1" />
                        <circle cx="18" cy="20" r="1" />
                        <path d="M6 6L4 2H2" />
                    </svg>
                    <span class="cart-badge">0</span>
                </a>
            </div>
        </div>
    </header>

    <!-- Navigation Drawer -->
    <div class="nav-drawer-overlay"></div>
    <nav class="nav-drawer">
        <div class="nav-drawer-header">
            <div class="nav-drawer-logo">
                <svg width="28" height="28" viewBox="0 0 32 32" fill="var(--color-primary)">
                    <rect x="8" y="2" width="16" height="28" rx="3" stroke="currentColor" stroke-width="2"
                        fill="none" />
                    <circle cx="16" cy="26" r="1.5" fill="currentColor" />
                </svg>
                <span>Ù…ÙˆØ¨Ø§ÙŠÙ„ Ø³ØªÙˆØ±</span>
            </div>
            <button class="nav-drawer-close" aria-label="Ø¥ØºÙ„Ø§Ù‚">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M18 6L6 18M6 6l12 12" />
                </svg>
            </button>
        </div>
        <div class="nav-drawer-content">
            <ul class="nav-drawer-links">
                <li><a href="index.html" class="nav-drawer-link"><svg viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2">
                            <path d="M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2V9z" />
                        </svg>Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a></li>
                <li><a href="shop.html" class="nav-drawer-link active"><svg viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2">
                            <path d="M6 6h15l-1.5 9h-12z" />
                            <circle cx="9" cy="20" r="1" />
                            <circle cx="18" cy="20" r="1" />
                        </svg>ØªØ³ÙˆÙ‘Ù‚</a></li>
                <li><a href="brands.html" class="nav-drawer-link"><svg viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2">
                            <path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83 0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z" />
                        </svg>Ø§Ù„Ù…Ø§Ø±ÙƒØ§Øª</a></li>
                <li><a href="repairs.html" class="nav-drawer-link"><svg viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2">
                            <path
                                d="M14.7 6.3a1 1 0 000 1.4l1.6 1.6a1 1 0 001.4 0l3.77-3.77a6 6 0 01-7.94 7.94l-6.91 6.91a2.12 2.12 0 01-3-3l6.91-6.91a6 6 0 017.94-7.94l-3.76 3.76z" />
                        </svg>Ø§Ù„ØµÙŠØ§Ù†Ø©</a></li>
                <li><a href="contact.html" class="nav-drawer-link"><svg viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2">
                            <path
                                d="M22 16.92v3a2 2 0 01-2.18 2 19.79 19.79 0 01-8.63-3.07 19.5 19.5 0 01-6-6 19.79 19.79 0 01-3.07-8.67A2 2 0 014.11 2h3a2 2 0 012 1.72c.127.96.361 1.903.7 2.81a2 2 0 01-.45 2.11L8.09 9.91a16 16 0 006 6l1.27-1.27a2 2 0 012.11-.45c.907.339 1.85.573 2.81.7A2 2 0 0122 16.92z" />
                        </svg>ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§</a></li>
            </ul>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="main-content shop-page">
        <div class="shop-container">
            <!-- Page Hero -->
            <div class="page-hero">
                <h1>ØªØ³ÙˆÙ‘Ù‚ Ø£Ø­Ø¯Ø« Ø§Ù„Ù‡ÙˆØ§ØªÙ</h1>
                <p>Ø§ÙƒØªØ´Ù ØªØ´ÙƒÙŠÙ„ØªÙ†Ø§ Ø§Ù„ÙˆØ§Ø³Ø¹Ø© Ù…Ù† Ø§Ù„Ù‡ÙˆØ§ØªÙ Ø§Ù„Ø°ÙƒÙŠØ© Ø¨Ø£ÙØ¶Ù„ Ø§Ù„Ø£Ø³Ø¹Ø§Ø±</p>
            </div>

            <!-- Shop Header -->
            <div class="shop-header">
                <span class="shop-results" id="results-count">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                        style="display:inline;vertical-align:middle;margin-left:6px;">
                        <rect x="5" y="2" width="14" height="20" rx="2" />
                    </svg>
                    ÙŠØªÙ… Ø¹Ø±Ø¶ <strong>0</strong> Ù…Ù†ØªØ¬
                </span>
                <div class="shop-actions">
                    <button class="filter-btn" onclick="openFilterSheet()">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M4 21v-7M4 10V3M12 21v-9M12 8V3M20 21v-5M20 12V3M1 14h6M9 8h6M17 16h6" />
                        </svg>
                        ÙÙ„ØªØ±
                    </button>
                    <select class="sort-select form-select" id="sort-select" onchange="sortProducts()">
                        <option value="newest">Ø§Ù„Ø£Ø­Ø¯Ø«</option>
                        <option value="price-low">Ø§Ù„Ø£Ù‚Ù„ Ø³Ø¹Ø±Ù‹Ø§</option>
                        <option value="price-high">Ø§Ù„Ø£Ø¹Ù„Ù‰ Ø³Ø¹Ø±Ù‹Ø§</option>
                    </select>
                </div>
            </div>

            <!-- Shop Layout -->
            <div class="shop-layout">
                <!-- Desktop Sidebar -->
                <aside class="shop-sidebar">
                    <div class="sidebar-section">
                        <h4 class="sidebar-title">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83 0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z" />
                            </svg>
                            Ø§Ù„Ù…Ø§Ø±ÙƒØ©
                        </h4>
                        <div class="brand-list" id="brand-filters"></div>
                    </div>

                    <div class="sidebar-section">
                        <h4 class="sidebar-title">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M12 1v22M17 5H9.5a3.5 3.5 0 000 7h5a3.5 3.5 0 010 7H6" />
                            </svg>
                            Ù†Ø·Ø§Ù‚ Ø§Ù„Ø³Ø¹Ø±
                        </h4>
                        <div class="price-inputs">
                            <input type="number" id="price-min" placeholder="Ù…Ù†" min="0" oninput="filterProducts()">
                            <input type="number" id="price-max" placeholder="Ø¥Ù„Ù‰" max="20000"
                                oninput="filterProducts()">
                        </div>
                    </div>

                    <div class="sidebar-section">
                        <h4 class="sidebar-title">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M9 12l2 2 4-4" />
                                <circle cx="12" cy="12" r="10" />
                            </svg>
                            Ø§Ù„ØªÙˆÙØ±
                        </h4>
                        <label class="stock-toggle">
                            <input type="checkbox" id="instock-filter" checked onchange="filterProducts()">
                            <span>Ø¹Ø±Ø¶ Ø§Ù„Ù…ØªÙˆÙØ± ÙÙ‚Ø·</span>
                        </label>
                    </div>
                </aside>

                <!-- Products Grid -->
                <div class="shop-content">
                    <div class="products-grid" id="products-grid"></div>

                    <div class="empty-state" id="empty-state" style="display:none;">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1">
                            <rect x="5" y="2" width="14" height="20" rx="2" />
                            <path d="M12 18h.01" />
                        </svg>
                        <p>Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù†ØªØ¬Ø§Øª ØªØ·Ø§Ø¨Ù‚ Ø§Ù„Ø¨Ø­Ø«</p>
                        <button class="btn btn-primary" onclick="resetFilters()">Ø¥Ø¹Ø§Ø¯Ø© Ø¶Ø¨Ø· Ø§Ù„ÙÙ„ØªØ±</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Mobile Filter Sheet -->
        <div class="filter-sheet-overlay" onclick="closeFilterSheet()"></div>
        <div class="filter-sheet" id="filter-sheet">
            <div class="filter-sheet-header">
                <h3 class="filter-sheet-title">ÙÙ„ØªØ± Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</h3>
                <button class="filter-sheet-close" onclick="closeFilterSheet()">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M18 6L6 18M6 6l12 12" />
                    </svg>
                </button>
            </div>
            <div class="filter-sheet-content">
                <div class="filter-group">
                    <h4 class="filter-group-title">Ø§Ù„Ù…Ø§Ø±ÙƒØ©</h4>
                    <div class="filter-pills" id="mobile-brand-filters"></div>
                </div>
                <div class="filter-group">
                    <h4 class="filter-group-title">Ù†Ø·Ø§Ù‚ Ø§Ù„Ø³Ø¹Ø±</h4>
                    <div class="filter-pills">
                        <button class="filter-pill" onclick="setPriceRange(0, 1000)">Ø£Ù‚Ù„ Ù…Ù† 1000</button>
                        <button class="filter-pill" onclick="setPriceRange(1000, 2000)">1000 - 2000</button>
                        <button class="filter-pill" onclick="setPriceRange(2000, 4000)">2000 - 4000</button>
                        <button class="filter-pill" onclick="setPriceRange(4000, 20000)">Ø£ÙƒØ«Ø± Ù…Ù† 4000</button>
                    </div>
                </div>
            </div>
            <div class="filter-sheet-footer">
                <button class="btn btn-secondary" onclick="resetFilters()">Ø¥Ø¹Ø§Ø¯Ø© Ø¶Ø¨Ø·</button>
                <button class="btn btn-primary" onclick="closeFilterSheet()">Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªØ§Ø¦Ø¬</button>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-bottom">
                <p class="footer-copyright">Â© 2024 Ù…ÙˆØ¨Ø§ÙŠÙ„ Ø³ØªÙˆØ±. Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©.</p>
                <div class="footer-legal">
                    <a href="privacy.html">Ø³ÙŠØ§Ø³Ø© Ø§Ù„Ø®ØµÙˆØµÙŠØ©</a>
                    <a href="terms.html">Ø§Ù„Ø´Ø±ÙˆØ· ÙˆØ§Ù„Ø£Ø­ÙƒØ§Ù…</a>
                </div>
            </div>
        </div>
    </footer>

    <script src="js/api.js"></script>
    <script src="js/database.js"></script>
    <script src="js/app.js"></script>
    <script>
        let allProducts = [];
        let allBrands = [];

        document.addEventListener('DOMContentLoaded', () => {
            loadData();
        });

        async function loadData() {
            try {
                // Try API first (if backend is running)
                allProducts = await API.getAllProducts();
                allBrands = await API.getAllBrands();
            } catch (e) {
                // Fallback to localStorage if API fails
                console.log('API not available, using localStorage');
                allProducts = ProductDB.getAllProducts();
                allBrands = ProductDB.getAllBrands();
            }
            populateBrandFilters();
            renderProducts(allProducts);
        }

        function populateBrandFilters() {
            const container = document.getElementById('brand-filters');
            const mobileContainer = document.getElementById('mobile-brand-filters');

            container.innerHTML = allBrands.map(b => `
                <label class="brand-item">
                    <input type="checkbox" value="${b.id}" onchange="filterProducts()">
                    <span>${b.name}</span>
                </label>
            `).join('');

            mobileContainer.innerHTML = allBrands.map(b => `
                <button class="filter-pill" data-brand="${b.id}" onclick="toggleMobileBrand(this, ${b.id})">${b.name}</button>
            `).join('');
        }

        function renderProducts(products) {
            const grid = document.getElementById('products-grid');
            const emptyState = document.getElementById('empty-state');

            if (products.length === 0) {
                grid.innerHTML = '';
                emptyState.style.display = 'block';
                document.getElementById('results-count').innerHTML = `<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="display:inline;vertical-align:middle;margin-left:6px;"><rect x="5" y="2" width="14" height="20" rx="2"/></svg> Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù†ØªØ¬Ø§Øª`;
                return;
            }

            emptyState.style.display = 'none';
            grid.innerHTML = products.map(p => {
                const brand = allBrands.find(b => b.id === p.brandId);
                const hasDiscount = p.oldPrice && p.oldPrice > p.price;

                return `
                    <a href="product.html?id=${p.id}" class="product-card">
                        ${hasDiscount ? '<span class="product-card-badge">Ø®ØµÙ…</span>' : ''}
                        ${p.featured && !hasDiscount ? '<span class="product-card-badge featured">Ù…Ù…ÙŠØ²</span>' : ''}
                        <div class="product-card-image">
                            <img src="${p.image || ''}" alt="${p.name}" loading="lazy" onerror="this.style.fontSize='48px';this.style.opacity='0.3';this.outerHTML='<span style=font-size:64px;opacity:0.4>ğŸ“±</span>'">
                        </div>
                        <div class="product-card-body">
                            <div class="product-card-brand">${brand?.name || ''}</div>
                            <h3 class="product-card-title">${p.name}</h3>
                            <div class="product-card-specs">
                                ${p.storage ? `<span>${p.storage}</span>` : ''}
                                ${p.ram ? `<span>${p.ram}</span>` : ''}
                            </div>
                            <div class="product-card-footer">
                                <div class="product-card-price">
                                    <span class="current">${p.price.toLocaleString('ar-SA')} Ø±.Ø³</span>
                                    ${hasDiscount ? `<span class="old">${p.oldPrice.toLocaleString('ar-SA')}</span>` : ''}
                                </div>
                                <div class="product-card-stock ${p.inStock ? 'in-stock' : 'out-of-stock'}">
                                    ${p.inStock ? 'âœ“ Ù…ØªÙˆÙØ±' : 'âœ— ØºÙŠØ± Ù…ØªÙˆÙØ±'}
                                </div>
                            </div>
                        </div>
                    </a>
                `;
            }).join('');

            document.getElementById('results-count').innerHTML = `<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="display:inline;vertical-align:middle;margin-left:6px;"><rect x="5" y="2" width="14" height="20" rx="2"/></svg> ÙŠØªÙ… Ø¹Ø±Ø¶ <strong>${products.length}</strong> Ù…Ù†ØªØ¬`;
        }

        function filterProducts() {
            let filtered = [...allProducts];

            // Brand filter
            const brandChecks = document.querySelectorAll('#brand-filters input:checked');
            if (brandChecks.length > 0) {
                const brandIds = Array.from(brandChecks).map(c => parseInt(c.value));
                filtered = filtered.filter(p => brandIds.includes(p.brandId));
            }

            // Price filter
            const minPrice = parseInt(document.getElementById('price-min').value) || 0;
            const maxPrice = parseInt(document.getElementById('price-max').value) || 999999;
            filtered = filtered.filter(p => p.price >= minPrice && p.price <= maxPrice);

            // In stock filter
            if (document.getElementById('instock-filter').checked) {
                filtered = filtered.filter(p => p.inStock);
            }

            // Sort
            sortProductsArray(filtered);

            renderProducts(filtered);
        }

        function sortProducts() {
            filterProducts();
        }

        function sortProductsArray(products) {
            const sort = document.getElementById('sort-select').value;
            switch (sort) {
                case 'price-low': products.sort((a, b) => a.price - b.price); break;
                case 'price-high': products.sort((a, b) => b.price - a.price); break;
                default: products.sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt));
            }
        }

        function setPriceRange(min, max) {
            document.getElementById('price-min').value = min;
            document.getElementById('price-max').value = max;
            filterProducts();
        }

        function resetFilters() {
            document.querySelectorAll('#brand-filters input').forEach(c => c.checked = false);
            document.querySelectorAll('.filter-pill').forEach(p => p.classList.remove('active'));
            document.getElementById('price-min').value = '';
            document.getElementById('price-max').value = '';
            document.getElementById('instock-filter').checked = true;
            renderProducts(allProducts);
        }

        function toggleMobileBrand(btn, brandId) {
            btn.classList.toggle('active');
            // Sync with desktop filter
            const desktopCheck = document.querySelector(`#brand-filters input[value="${brandId}"]`);
            if (desktopCheck) {
                desktopCheck.checked = btn.classList.contains('active');
            }
            filterProducts();
        }

        function openFilterSheet() {
            document.getElementById('filter-sheet').classList.add('active');
            document.querySelector('.filter-sheet-overlay').classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function closeFilterSheet() {
            document.getElementById('filter-sheet').classList.remove('active');
            document.querySelector('.filter-sheet-overlay').classList.remove('active');
            document.body.style.overflow = '';
        }
    </script>
</body>

</html>